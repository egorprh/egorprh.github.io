import{d as k,a as b,b as I,r,j as e,L as v}from"./index-DF-I8wqH.js";import{B as C}from"./BackIcon-loaPqsaO.js";/* empty css                         *//* empty css                     */import{C as $}from"./ContentNotFound-DVSDmGeN.js";function E({user:n}){const{quizId:a}=k(),c=b(),{data:t}=I(),[u,p]=r.useState([]),[d,x]=r.useState(null),[m,f]=r.useState(null),[j,z]=r.useState(null),N=n!=null&&n.id?n.id:0;r.useEffect(()=>{if(t!=null&&t.courses){const s=t.courses.flatMap(i=>i.lessons).find(i=>i.quizzes.find(o=>o.id===Number(a)));s?(x(s.course_id),f(s.id)):c(`/lessons/${s.course_id}/${s.id}`)}if(t!=null&&t.homework){const s=t.homework.find(i=>i.quiz_id===Number(a));s?(p((s==null?void 0:s.questions)||[]),z(s.progress)):(console.error("Не найдено домашнее задание для этого quizId"),c("/homework"))}},[t,N,a,c]);const q=()=>{d&&m?c(`/lessons/${d}/${m}/quiz`):console.error("Нет данных для перехода к тесту")};return e.jsxs("div",{className:"content quiz-results-content",children:[e.jsxs(v,{to:"/homework",className:"back-link",children:[e.jsx(C,{}),"Назад"]}),e.jsx("div",{className:"quiz-progress-summary",children:e.jsxs("p",{className:"progress-text",children:["Ваш результат: ",j,"% правильных ответов!"]})}),e.jsx("h1",{children:"Ваши ответы"}),e.jsxs("div",{className:"quiz",children:[u.length?u.map((s,i)=>e.jsxs("div",{className:"quiz-question",children:[e.jsxs("h2",{children:[i+1,". ",s.text]}),e.jsx("div",{className:"quiz-answers",children:s.answers.map(o=>{const g=o.correct,h=o.user_answer;let l="";return g?l="correct":h&&(l="incorrect"),e.jsxs("label",{className:`quiz-answer ${l}`,children:[e.jsx("input",{type:"radio",checked:h,disabled:!0,readOnly:!0}),o.text]},o.id)})})]},s.id)):e.jsx($,{message:"Не удалось загрузить результаты теста"}),e.jsx("button",{className:"btn",onClick:q,children:"Пройти заново"})]})]})}export{E as default};
